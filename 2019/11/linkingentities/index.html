<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Linking entities or entity relationships - Yet another gamedev blog</title><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name=renderer content="webkit"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=format-detection content="telephone=no,email=no,adress=no"><meta name=theme-color content="#000000"><meta http-equiv=window-target content="_top"><meta name=description content="How to link entities in a 'hierarchy'."><meta name=generator content="Hugo 0.64.0 with theme pure"><title>Linking entities or entity relationships - Yet another gamedev blog</title><link rel=stylesheet href=https://eothaun.github.io/DOTS-Playground/css/style.css><link rel=stylesheet href=https://cdn.staticfile.org/highlight.js/9.15.10/styles/github.min.css><meta property="og:title" content="Linking entities or entity relationships"><meta property="og:description" content="How to link entities in a 'hierarchy'."><meta property="og:type" content="article"><meta property="og:url" content="https://eothaun.github.io/DOTS-Playground/2019/11/linkingentities/"><meta property="article:published_time" content="2019-11-21T14:59:02+01:00"><meta property="article:modified_time" content="2019-11-21T14:59:02+01:00"><meta itemprop=name content="Linking entities or entity relationships"><meta itemprop=description content="How to link entities in a 'hierarchy'."><meta itemprop=datePublished content="2019-11-21T14:59:02+01:00"><meta itemprop=dateModified content="2019-11-21T14:59:02+01:00"><meta itemprop=wordCount content="180"><meta itemprop=keywords content="dots,ecs,csharp,reference,relation,hybrid,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Linking entities or entity relationships"><meta name=twitter:description content="How to link entities in a 'hierarchy'."><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head></head><body class=main-center itemscope itemtype=http://schema.org/WebPage><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=slimContent><div class=navbar-header><div class="profile-block text-center"><a id=avatar href=https://github.com/Eothaun/DOTS-Playground/ target=_blank><img class="img-circle img-rotate" src=https://eothaun.github.io/DOTS-Playground/avatar.png width=200 height=200></a><h2 id=name class="hidden-xs hidden-sm">DOTS Playground</h2><h3 id=title class="hidden-xs hidden-sm hidden-md">Year 3 Students Gamedevs</h3><small id=location class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i>Breda University of Applied Sciences</small></div><div class=search id=search-form-wrap><form class="search-form sidebar-form"><div class=input-group><input type=text class="search-form-input form-control" placeholder=Search>
<span class=input-group-btn><button type=submit class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button></span></div><div class=ins-search><div class=ins-search-mask></div><div class=ins-search-container><div class=ins-input-wrapper><input type=text class=ins-search-input placeholder="Type something..." x-webkit-speech>
<button type=button class="close ins-close ins-selectable" data-dismiss=modal aria-label=Close><span aria-hidden=true>×</span></button></div><div class=ins-section-wrapper><div class=ins-section-container></div></div></div></div></form></div><button class="navbar-toggle collapsed" type=button data-toggle=collapse data-target=#main-navbar aria-controls=main-navbar aria-expanded=false>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button></div><nav id=main-navbar class="collapse navbar-collapse" itemscope itemtype=http://schema.org/SiteNavigationElement role=navigation><ul class="nav navbar-nav main-nav"><li class="menu-item menu-item-home"><a href=/DOTS-Playground/><i class="icon icon-home-fill"></i><span class=menu-title>Home</span></a></li><li class="menu-item menu-item-series"><a href=/DOTS-Playground/series><i class="icon icon-project"></i><span class=menu-title>Series</span></a></li><li class="menu-item menu-item-archives"><a href=/DOTS-Playground/posts><i class="icon icon-archives-fill"></i><span class=menu-title>Archives</span></a></li><li class="menu-item menu-item-categories"><a href=/DOTS-Playground/categories><i class="icon icon-folder"></i><span class=menu-title>Categories</span></a></li><li class="menu-item menu-item-tags"><a href=/DOTS-Playground/tags><i class="icon icon-tags"></i><span class=menu-title>Tags</span></a></li><li class="menu-item menu-item-about"><a href=/DOTS-Playground/about><i class="icon icon-users"></i><span class=menu-title>About</span></a></li></ul></nav></div></header><aside class=sidebar itemscope itemtype=http://schema.org/WPSideBar><div class=slimContent><div class=widget><h3 class=widget-title>Board</h3><div class=widget-body><div id=board><div class=content><p>Write programs that do one thing and do it well. Write programs to work together — McIlroy Unix philosophy<br><br>Write systems that do one thing and do it well. Write systems to work together — DOD adoption</p></div></div></div></div><div class=widget><h3 class=widget-title>Categories</h3><div class=widget-body><ul class=category-list><li class=category-list-item><a href=https://eothaun.github.io/DOTS-Playground/categories/data-oriented-design/ class=category-list-link>data-oriented-design</a><span class=category-list-count>1</span></li><li class=category-list-item><a href=https://eothaun.github.io/DOTS-Playground/categories/dots/ class=category-list-link>dots</a><span class=category-list-count>2</span></li><li class=category-list-item><a href=https://eothaun.github.io/DOTS-Playground/categories/ecs/ class=category-list-link>ecs</a><span class=category-list-count>2</span></li><li class=category-list-item><a href=https://eothaun.github.io/DOTS-Playground/categories/unity/ class=category-list-link>unity</a><span class=category-list-count>2</span></li></ul></div></div><div class=widget><h3 class=widget-title>Tags</h3><div class=widget-body><ul class=tag-list><li class=tag-list-item><a href=https://eothaun.github.io/DOTS-Playground/tags/componentdatafromentity/ class=tag-list-link>componentdatafromentity</a><span class=tag-list-count>1</span></li><li class=tag-list-item><a href=https://eothaun.github.io/DOTS-Playground/tags/csharp/ class=tag-list-link>csharp</a><span class=tag-list-count>1</span></li><li class=tag-list-item><a href=https://eothaun.github.io/DOTS-Playground/tags/data-oriented-design/ class=tag-list-link>data-oriented-design</a><span class=tag-list-count>1</span></li><li class=tag-list-item><a href=https://eothaun.github.io/DOTS-Playground/tags/dod/ class=tag-list-link>dod</a><span class=tag-list-count>1</span></li><li class=tag-list-item><a href=https://eothaun.github.io/DOTS-Playground/tags/dots/ class=tag-list-link>dots</a><span class=tag-list-count>2</span></li><li class=tag-list-item><a href=https://eothaun.github.io/DOTS-Playground/tags/ecs/ class=tag-list-link>ecs</a><span class=tag-list-count>1</span></li><li class=tag-list-item><a href=https://eothaun.github.io/DOTS-Playground/tags/esc/ class=tag-list-link>esc</a><span class=tag-list-count>1</span></li><li class=tag-list-item><a href=https://eothaun.github.io/DOTS-Playground/tags/hybrid/ class=tag-list-link>hybrid</a><span class=tag-list-count>1</span></li><li class=tag-list-item><a href=https://eothaun.github.io/DOTS-Playground/tags/reference/ class=tag-list-link>reference</a><span class=tag-list-count>1</span></li><li class=tag-list-item><a href=https://eothaun.github.io/DOTS-Playground/tags/relation/ class=tag-list-link>relation</a><span class=tag-list-count>1</span></li><li class=tag-list-item><a href=https://eothaun.github.io/DOTS-Playground/tags/software-engineering/ class=tag-list-link>software-engineering</a><span class=tag-list-count>1</span></li></ul></div></div><div class=widget><h3 class=widget-title>Recent Posts</h3><div class=widget-body><ul class="recent-post-list list-unstyled no-thumbnail"><li><div class=item-inner><p class=item-title><a href=https://eothaun.github.io/DOTS-Playground/2019/11/entityinteraction/ class=title>How Entites could interact</a></p><p class=item-date><time datetime="2019-11-21 21:45:00 +0100 +0100" itemprop=datePublished>2019-11-21</time></p></div></li><li><div class=item-inner><p class=item-title><a href=https://eothaun.github.io/DOTS-Playground/2019/11/linkingentities/ class=title>Linking entities or entity relationships</a></p><p class=item-date><time datetime="2019-11-21 14:59:02 +0100 +0100" itemprop=datePublished>2019-11-21</time></p></div></li></ul></div></div></div></aside><aside class="sidebar sidebar-toc collapse" id=collapseToc itemscope itemtype=http://schema.org/WPSideBar><div class=slimContent><nav id=toc class=article-toc><h3 class=toc-title>Catalogue</h3><div class="toc-content always-active"><nav id=TableOfContents><ul><li><a href=#the-problem>The problem</a></li><li><a href=#linking-entities-as-a-group>Linking entities as a group</a></li></ul></nav></div></nav></div></aside><main class=main role=main><div class=content><article id=- class="article article-type-" itemscope itemtype=http://schema.org/BlogPosting><div class=article-header><h1 itemprop=name><a class=article-title href=/DOTS-Playground/2019/11/linkingentities/>Linking entities or entity relationships</a></h1><div class=article-meta><span class=article-date><i class="icon icon-calendar-check"></i><a href=https://eothaun.github.io/DOTS-Playground/2019/11/linkingentities/ class=article-date><time datetime="2019-11-21 14:59:02 +0100 +0100" itemprop=datePublished>2019-11-21</time></a>
</span><span class=article-category><i class="icon icon-folder"></i><a class=article-category-link href=/DOTS-Playground/categories/dots/>dots</a>
<a class=article-category-link href=/DOTS-Playground/categories/ecs/>ecs</a>
<a class=article-category-link href=/DOTS-Playground/categories/unity/>unity</a></span>
<span class=article-tag><i class="icon icon-tags"></i><a class=article-tag-link href=/DOTS-Playground/tags/dots/>dots</a>
<a class=article-tag-link href=/DOTS-Playground/tags/ecs/>ecs</a>
<a class=article-tag-link href=/DOTS-Playground/tags/csharp/>csharp</a>
<a class=article-tag-link href=/DOTS-Playground/tags/reference/>reference</a>
<a class=article-tag-link href=/DOTS-Playground/tags/relation/>relation</a>
<a class=article-tag-link href=/DOTS-Playground/tags/hybrid/>hybrid</a></span>
<span class="post-wordcount hidden-xs" itemprop=wordCount>Word Count:180 words</span>
<span class="post-readcount hidden-xs" itemprop=timeRequired>Read Count:1 minutes</span><br>Written by:
<a href=http://simonrenger.de><i class="icon icon-users"></i>Simon Renger</a>
<a href=https://github.com/Nvs2000><i class="icon icon-users"></i>Niels van Steeg</a></div></div><div class="article-entry marked-body" itemprop=articleBody><h2 id=the-problem>The problem</h2><p>Often in games different objects interact with each other, eg. a button opens a door, a child follows its parent etc. With the new ESC system those hierarchies aren&rsquo;t trivial, hierarchies don&rsquo;t really exist natively. So how do we link entities in a hierarchy?</p><h2 id=linking-entities-as-a-group>Linking entities as a group</h2><p>In the new ESC if you translate a GameObject via <code>ConvertToEntity</code> to entities the hierarchy would not be translated into the ESC World. The simple solution to this is called <code>LinkedEntityGroup</code>. This translates the hierarchy to ESC land.</p><p><code>LinkedEntityGroup</code> is a Buffer which can be used to link the lifetime of entities together. This buffer takes an entity as reference point (root) and when this one gets destroyed all the linked entities get destroyed as well.</p><p>The following example demonstrates the usage of the <code>LinkedEntityGroup</code>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>LinkedEntityGroupComponent</span>: MonoBehaviour, IConvertGameObjectToEntity
{
     <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Convert (Entity entity, EntityManager dstManager, GameObjectConversionSystem conversionSystem)
     {
         <span style=color:#66d9ef>var</span> buffer = dstManager.AddBuffer &lt;LinkedEntityGroup&gt; (entity);

         <span style=color:#66d9ef>var</span> children = transform.GetComponentsInChildren &lt;Transform&gt; ();
         <span style=color:#66d9ef>foreach</span> (<span style=color:#66d9ef>var</span> child <span style=color:#66d9ef>in</span> children)
         {
             <span style=color:#66d9ef>var</span> childEntity = conversionSystem.GetPrimaryEntity (child.gameObject);
             buffer.Add (childEntity);
         }
     }
 }
</code></pre></div></div></article></div><nav class="bar bar-footer clearfix" data-stick-bottom><div class=bar-inner><ul class="pager pull-left"><li class=prev><a href=https://eothaun.github.io/DOTS-Playground/about/ title=About><i class="icon icon-angle-left" aria-hidden=true></i><span>&nbsp;&nbsp;Newer</span></a></li><li class=next><a href=https://eothaun.github.io/DOTS-Playground/2019/11/entityinteraction/ title="How Entites could interact"><span>Older&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden=true></i></a></li><li class=toggle-toc><a class="toggle-btn collapsed" data-toggle=collapse href=#collapseToc aria-expanded=false title=Catalogue role=button><span>[&nbsp;</span><span>Catalogue</span>
<i class="text-collapsed icon icon-anchor"></i><i class="text-in icon icon-close"></i><span>]</span></a></li></ul><div class=bar-right><div class=share-component data-sites=facebook,twitter,linkedin data-mobile-sites=facebook,twitter,linkedin></div></div></div></nav></main><footer class=footer itemscope itemtype=http://schema.org/WPFooter><ul class=social-links><li><a href=https://github.com/MarjoleinKaal target=_blank title=github data-toggle=tooltip data-placement=top><i class="icon icon-github"></i>Marjolein</a></li><li><a href=https://github.com/FireFlyForLife target=_blank title=github data-toggle=tooltip data-placement=top><i class="icon icon-github"></i>Maiko</a></li><li><a href=https://github.com/MennoMarkus target=_blank title=github data-toggle=tooltip data-placement=top><i class="icon icon-github"></i>Menno</a></li><li><a href=https://github.com/Nvs2000 target=_blank title=github data-toggle=tooltip data-placement=top><i class="icon icon-github"></i>Niels</a></li><li><a href=https://github.com/jesseroffel target=_blank title=github data-toggle=tooltip data-placement=top><i class="icon icon-github"></i>Jesse</a></li><li><a href=https://github.com/JonahRutten target=_blank title=github data-toggle=tooltip data-placement=top><i class="icon icon-github"></i>Jonah</a></li><li><a href=https://github.com/PepijnAverink target=_blank title=github data-toggle=tooltip data-placement=top><i class="icon icon-github"></i>Pepijn</a></li><li><a href=https://github.com/RobinACS target=_blank title=github data-toggle=tooltip data-placement=top><i class="icon icon-github"></i>Robin</a></li><li><a href=https://github.com/simonrenger target=_blank title=github data-toggle=tooltip data-placement=top><i class="icon icon-github"></i>Simon</a></li><li><a href=https://eothaun.github.io/index.xml target=_blank title=rss data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li></ul><div class=copyright>&copy;2019 -
2020<div class=publishby>Theme by <a href=https://github.com/xiaoheiAh target=_blank>xiaoheiAh </a>base on<a href=https://github.com/xiaoheiAh/hugo-theme-pure target=_blank> pure</a>.</div></div></footer><script src=https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js></script><script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script type=text/javascript src=https://cdn.staticfile.org/highlight.js/9.15.10/highlight.min.js></script><script type=text/javascript src=https://cdn.staticfile.org/highlight.js/9.15.10/languages/rust.min.js></script><script type=text/javascript src=https://cdn.staticfile.org/highlight.js/9.15.10/languages/dockerfile.min.js></script><script>hljs.configure({tabReplace:'    ',classPrefix:''})
hljs.initHighlightingOnLoad();</script><script type=text/javascript src=https://eothaun.github.io/DOTS-Playground/js/application.js></script><script type=text/javascript src=https://eothaun.github.io/DOTS-Playground/js/plugin.js></script><script>(function(window){var INSIGHT_CONFIG={TRANSLATION:{POSTS:'Posts',PAGES:'Pages',CATEGORIES:'Categories',TAGS:'Tags',UNTITLED:'(Untitled)',},ROOT_URL:'https:\/\/eothaun.github.io\/DOTS-Playground\/',CONTENT_URL:'https:\/\/eothaun.github.io\/DOTS-Playground\/\/searchindex.json ',};window.INSIGHT_CONFIG=INSIGHT_CONFIG;})(window);</script><script type=text/javascript src=https://eothaun.github.io/DOTS-Playground/js/insight.js></script><script type=text/javascript src=https://eothaun.github.io/DOTS-Playground/raphael/raphael.min.js></script><script type=text/javascript src=https://flowchart.js.org/flowchart-latest.js></script><script>$(".diagram").each((indx,elm)=>{var diagram=flowchart.parse($(elm).text());$(elm).text("");diagram.drawSVG(elm);});</script></body></html>